/**
 * Controller for managing user profiles
 * @author kvermeer
 */

// Dependencies
var BaseComponents = require('webapp/base');
var UserManagement = require('core/user_management');
var util = require('util');

function UserSettingsController() {}
util.inherits(UserSettingsController, BaseComponents.BaseController);

/**
 * Method for handling the get of the user settings page
 *
 * @param {Express.Request} request - the request object
 * @param {Express.Response} response - the response object
 * @return {Promise}
 */
UserSettingsController.prototype.getUserSettingsPage = function(request, response) {
    var userId = this.getCurrentUserId(request);
    var userProfileService = new UserManagement.UserProfileService();
    return userProfileService.getUserProfile(userId).then(function(userProfile) {
        response.render('pages/user/settings', userProfile);
    });
}

// Exports
module.exports = UserSettingsController;
